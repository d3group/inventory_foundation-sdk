# Database management


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

------------------------------------------------------------------------

<a
href="https://github.com/d3group/inventory_foundation-sdk/blob/main/inventory_foundation_sdk/db_mgmt.py#L20"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_db_credentials

>  get_db_credentials ()

\*Fetch PostgreSQL database credentials from the configuration file of
the kedro project.

Uses `OmegaConfigLoader` to load credentials stored under
`credentials.postgres`.

Returns: dict: A dictionary with the database connection details (e.g.,
host, port, user, password, dbname).\*

------------------------------------------------------------------------

<a
href="https://github.com/d3group/inventory_foundation-sdk/blob/main/inventory_foundation_sdk/db_mgmt.py#L268"
target="_blank" style="float:right; font-size:smaller">source</a>

### insert_multi_rows

>  insert_multi_rows (data_to_insert:pandas.core.frame.DataFrame,
>                         table_name:str, column_names:list, types:list, cur,
>                         conn, return_with_ids:bool=False,
>                         unique_columns:list=None)

\*Inserts data into the specified database table, with an optional
return of database-assigned IDs.

Args: data_to_insert (pd.DataFrame): DataFrame containing the data to be
inserted. table_name (str): Name of the target database table.
column_names (list): List of column names for the target table. types
(list): List of Python types (e.g., \[int, float\]) for data conversion.
cur (psycopg2.cursor): Database cursor for executing SQL commands. conn
(psycopg2.connection): Database connection for committing transactions.
return_with_ids (bool): If True, returns the original DataFrame with an
additional “ID” column.

Returns: pd.DataFrame | None: Original DataFrame with an “ID” column if
`return_with_ids` is True; otherwise, None.\*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>data_to_insert</td>
<td>DataFrame</td>
<td></td>
<td></td>
</tr>
<tr>
<td>table_name</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr>
<td>column_names</td>
<td>list</td>
<td></td>
<td></td>
</tr>
<tr>
<td>types</td>
<td>list</td>
<td></td>
<td></td>
</tr>
<tr>
<td>cur</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>conn</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>return_with_ids</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr>
<td>unique_columns</td>
<td>list</td>
<td>None</td>
<td>mandatory if return_with_ids is True</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>pandas.core.frame.DataFrame | None</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/d3group/inventory_foundation-sdk/blob/main/inventory_foundation_sdk/db_mgmt.py#L153"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_in_scope_entries

>  check_in_scope_entries (target_table, dataset_column, id_column,
>                              insert_arguments, credentials, dataset_id,
>                              logger, filter=None, further_primary_keys=None,
>                              further_primary_keys_values=None)

\*Ensures all entries in the dataset scope have corresponding entries in
the target table. If an entry is missing, specified insert_arguments are
set to zero.

Args: target_table (str): The name of the target table to check and
update. dataset_column (str): The name of the column identifying the
dataset (e.g., “datasetID”). id_column (str): The name of the column
identifying the entries (e.g., “skuID”). insert_arguments (list): List
of columns to be inserted with default zero values if missing.
further_primary_keys (list): Additional primary key columns in the
target table. further_primary_keys_values (list): Corresponding values
for further_primary_keys.\*

------------------------------------------------------------------------

<a
href="https://github.com/d3group/inventory_foundation-sdk/blob/main/inventory_foundation_sdk/db_mgmt.py#L268"
target="_blank" style="float:right; font-size:smaller">source</a>

### insert_multi_rows

>  insert_multi_rows (data_to_insert:pandas.core.frame.DataFrame,
>                         table_name:str, column_names:list, types:list, cur,
>                         conn, return_with_ids:bool=False,
>                         unique_columns:list=None)

\*Inserts data into the specified database table, with an optional
return of database-assigned IDs.

Args: data_to_insert (pd.DataFrame): DataFrame containing the data to be
inserted. table_name (str): Name of the target database table.
column_names (list): List of column names for the target table. types
(list): List of Python types (e.g., \[int, float\]) for data conversion.
cur (psycopg2.cursor): Database cursor for executing SQL commands. conn
(psycopg2.connection): Database connection for committing transactions.
return_with_ids (bool): If True, returns the original DataFrame with an
additional “ID” column.

Returns: pd.DataFrame | None: Original DataFrame with an “ID” column if
`return_with_ids` is True; otherwise, None.\*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>data_to_insert</td>
<td>DataFrame</td>
<td></td>
<td></td>
</tr>
<tr>
<td>table_name</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr>
<td>column_names</td>
<td>list</td>
<td></td>
<td></td>
</tr>
<tr>
<td>types</td>
<td>list</td>
<td></td>
<td></td>
</tr>
<tr>
<td>cur</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>conn</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>return_with_ids</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr>
<td>unique_columns</td>
<td>list</td>
<td>None</td>
<td>mandatory if return_with_ids is True</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>pandas.core.frame.DataFrame | None</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

                    WARNING  /opt/hostedtoolcache/Python/3.10.16 warnings.py:109
                             /x64/lib/python3.10/site-packages/f                
                             astcore/docscrape.py:230:                          
                             UserWarning: potentially wrong                     
                             underline length...                                
                             Attributes:                                        
                             ---------- in                                      
                             A class to represent a SQL                         
                             database.                                          
                             ...                                                
                               else: warn(msg)                                  
                                                                                
                    WARNING  /opt/hostedtoolcache/Python/3.10.16 warnings.py:109
                             /x64/lib/python3.10/site-packages/f                
                             astcore/docscrape.py:230:                          
                             UserWarning: potentially wrong                     
                             underline length...                                
                             Methods:                                           
                             ------- in                                         
                             A class to represent a SQL                         
                             database.                                          
                             ...                                                
                               else: warn(msg)                                  
                                                                                

------------------------------------------------------------------------

<a
href="https://github.com/d3group/inventory_foundation-sdk/blob/main/inventory_foundation_sdk/db_mgmt.py#L384"
target="_blank" style="float:right; font-size:smaller">source</a>

### SQLDatabase

>  SQLDatabase ()

\*A class to represent a SQL database.

## Attributes:

credentials : dict A dictionary containing the database connection
credentials. connection : psycopg2.connection The database connection
object.

## Methods:

connect(): Connects to the database using the provided credentials.

close(): Closes the database connection.

execute_query(query: str): Executes the given SQL query.

execute_multiple_queries(queries: list, params: list = None, fetchrows:
bool = False): Executes a list or iterable of SQL queries. If fetchrows
is True, iterates over queries and fetches rows. If fetchrows is False,
uses executemany for batch execution.\*
